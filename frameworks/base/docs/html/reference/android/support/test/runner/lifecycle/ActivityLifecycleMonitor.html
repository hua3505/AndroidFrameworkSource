





















































































































<!DOCTYPE html>
<html devsite>
<head>

  
    <meta name="top_category" value="develop" />
    
    <meta name="subcategory" value="reference" />

    
      <meta name="book_path" value="/reference/android/support/test/_book.yaml" />
    

    

    

    

    

    

    


<title>ActivityLifecycleMonitor</title>


</head>

<body class="gc-documentation develop reference api apilevel-">
<div id="doc-api-level" class="" style="display:none"></div>




<div id="naMessage"></div>

<div id="api-info-block">
<div class="api-level">
  
  
  

</div>




<div class="sum-details-links">

</div><!-- end sum-details-links -->
</div><!-- end api-info-block -->

<div class="api apilevel-" id="jd-content">

<!-- ======== START OF CLASS DATA ======== -->

<h1 class="api-title">ActivityLifecycleMonitor</h1>
<p>
<code class="api-signature">
  public
  
  
  
  interface
  ActivityLifecycleMonitor
</code>
<br>


<code class="api-signature">
  
  
  
</code>

</p><table class="jd-inheritance-table">


  <tr>
    
    <td colspan="1" class="jd-inheritance-class-cell">android.support.test.runner.lifecycle.ActivityLifecycleMonitor
    </td>
  </tr>
  

</table>
  

    

<br><hr>


  <p>Interface for tests to use when they need to query the activity lifecycle state.
 <p>
 Activity lifecycle changes occur only on the UI thread - therefore listeners registered with
 an ActivityLifecycleMonitor should expect to be invoked on the UI thread. The direct query
 methods can only be called on the UI thread because otherwise they would not be able to return
 consistent responses.
 <p>
 Retrieve instances of the monitor through <code><a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleMonitorRegistry.html">ActivityLifecycleMonitorRegistry</a></code>.
 <p>
 Detecting these lifecycle states requires support from Instrumentation, therefore do not expect
 an instance to be present under any arbitrary instrumentation.
</p>







<h2 class="api-section">Summary</h2>



























<!-- ========== METHOD SUMMARY =========== -->
<table id="pubmethods" class="responsive methods">
<tr><th colspan="2"><h3>Public methods</h3></th></tr>



  
  <tr class="api apilevel-" >
  
  
    <td><code>
        abstract
        
        
        
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleMonitor.html#addLifecycleCallback(android.support.test.runner.lifecycle.ActivityLifecycleCallback)">addLifecycleCallback</a>(<a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleCallback.html">ActivityLifecycleCallback</a> callback)
      </code>
      
        <p>Adds a new callback that will be notified when lifecycle changes occur.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-" >
  
  
    <td><code>
        abstract
        
        
        
        
        Collection&lt;Activity&gt;</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleMonitor.html#getActivitiesInStage(android.support.test.runner.lifecycle.Stage)">getActivitiesInStage</a>(<a href="/reference/android/support/test/runner/lifecycle/Stage.html">Stage</a> stage)
      </code>
      
        <p>Returns all activities in a given stage of their lifecycle.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-" >
  
  
    <td><code>
        abstract
        
        
        
        
        <a href="/reference/android/support/test/runner/lifecycle/Stage.html">Stage</a></code>
    </td>
  
    <td width="100%">
      <code>
      <a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleMonitor.html#getLifecycleStageOf(android.app.Activity)">getLifecycleStageOf</a>(Activity activity)
      </code>
      
        <p>Returns the current lifecycle stage of a given activity.
        
    
</p>
      
    </td>
  </tr>
  

  
  <tr class="api apilevel-" >
  
  
    <td><code>
        abstract
        
        
        
        
        void</code>
    </td>
  
    <td width="100%">
      <code>
      <a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleMonitor.html#removeLifecycleCallback(android.support.test.runner.lifecycle.ActivityLifecycleCallback)">removeLifecycleCallback</a>(<a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleCallback.html">ActivityLifecycleCallback</a> callback)
      </code>
      
        <p>Removes a previously registered lifecycle callback.
        
    
</p>
      
    </td>
  </tr>
  


</table>








<!-- XML Attributes -->


<!-- Enum Values -->


<!-- Constants -->


<!-- Fields -->


<!-- Public ctors -->



<!-- ========= CONSTRUCTOR DETAIL ======== -->
<!-- Protected ctors -->



<!-- ========= METHOD DETAIL ======== -->
<!-- Public methdos -->

<h2 class="api-section">Public methods</h2>



<A NAME="addLifecycleCallback(android.support.test.runner.lifecycle.ActivityLifecycleCallback)"></A>

<div class="api apilevel-">
    <h3 class="api-name">addLifecycleCallback</h3>
    <div class="api-level">
      <div></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
void addLifecycleCallback (<a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleCallback.html">ActivityLifecycleCallback</a> callback)</pre>
    
    

    
  <p>Adds a new callback that will be notified when lifecycle changes occur.
 <p>
 Implementors will not hold a strong ref to the callback, the code which registers callbacks
 is responsible for this. Code which registers callbacks should responsibly
 remove their callback when it is no longer needed.
 </p>
 <p>
 Callbacks are executed on the main thread of the application, and should take care not to
 block or otherwise perform expensive operations as it will directly impact the application.
 </p></p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>callback</code></td>
        <td width="100%">
          <code>ActivityLifecycleCallback</code>:
          an ActivityLifecycleCallback
</td>
      </tr>
    </table>

</div>


<A NAME="getActivitiesInStage(android.support.test.runner.lifecycle.Stage)"></A>

<div class="api apilevel-">
    <h3 class="api-name">getActivitiesInStage</h3>
    <div class="api-level">
      <div></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
Collection&lt;Activity&gt; getActivitiesInStage (<a href="/reference/android/support/test/runner/lifecycle/Stage.html">Stage</a> stage)</pre>
    
    

    
  <p>Returns all activities in a given stage of their lifecycle.
 <p>
 This method can only return a consistant and correct answer from the main thread, therefore
 callers should always invoke it from the main thread and implementors are free to throw an
 exception if the call is not made on the main thread.
 </p>
 <p>
 Implementors should ensure this method returns a consistant response if called from a
 lifecycle callback also registered with this monitor (eg: it would be horriblely wrong if a
 callback sees PAUSED and calls this method with the PAUSED and does not see its activity in
 the response.
 </p>
 <p>
 Callers should be aware that the monitor implementation may not hold strong references to the
 Activities in the application. Therefore stages which are considered end stages or eligible
 for garbage collection on low memory situations may not return an instance of a particular
 activity if it has been garbage collected.</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>stage</code></td>
        <td width="100%">
          <code>Stage</code>:
          the stage to query for.</td>
      </tr>
    </table>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code>Collection&lt;Activity&gt;</code></td>
        <td width="100%">a snapshot Collection of activities in the given stage. This collection may be empty.</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code>IllegalStateException</code></td>
          <td width="100%">if called from outside the main thread.
</td>
        </tr>
      </table>
  

</div>


<A NAME="getLifecycleStageOf(android.app.Activity)"></A>

<div class="api apilevel-">
    <h3 class="api-name">getLifecycleStageOf</h3>
    <div class="api-level">
      <div></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
<a href="/reference/android/support/test/runner/lifecycle/Stage.html">Stage</a> getLifecycleStageOf (Activity activity)</pre>
    
    

    
  <p>Returns the current lifecycle stage of a given activity.
 <p>
 This method can only return a consistant and correct answer
 from the main thread, therefore callers should always invoke
 it from the main thread and implementors are free to throw an
 exception if the call is not made on the main thread.
 </p>
 <p>
 Implementors should ensure this method returns a consistant response if called from a
 lifecycle callback also registered with this monitor (eg: it would be horriblely wrong if a
 callback sees PAUSED and calls this method with the same activity and gets RESUMED.
 </p></p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>activity</code></td>
        <td width="100%">
          <code>Activity</code>:
          an activity in this application.</td>
      </tr>
    </table>
    <table class="responsive">
      <tr><th colspan=2>Returns</th></tr>
      <tr>
        <td><code><a href="/reference/android/support/test/runner/lifecycle/Stage.html">Stage</a></code></td>
        <td width="100%">the lifecycle stage this activity is in.</td>
      </tr>
    </table>
      <table class="responsive">
      <tr><th colspan=2>Throws</th></tr>
        <tr>
          <td><code>IllegalArgumentException</code></td>
          <td width="100%">if activity is unknown to the monitor.</td>
        </tr>
        <tr>
          <td><code>NullPointerException</code></td>
          <td width="100%">if activity is null.</td>
        </tr>
        <tr>
          <td><code>IllegalStateException</code></td>
          <td width="100%">if called off the main thread.
</td>
        </tr>
      </table>
  

</div>


<A NAME="removeLifecycleCallback(android.support.test.runner.lifecycle.ActivityLifecycleCallback)"></A>

<div class="api apilevel-">
    <h3 class="api-name">removeLifecycleCallback</h3>
    <div class="api-level">
      <div></div>
      
  

    </div>
<pre class="api-signature no-pretty-print">
void removeLifecycleCallback (<a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleCallback.html">ActivityLifecycleCallback</a> callback)</pre>
    
    

    
  <p>Removes a previously registered lifecycle callback.
</p>
    <table class="responsive">
    <tr><th colspan=2>Parameters</th></tr>
      <tr>
        <td><code>callback</code></td>
        <td width="100%">
          <code>ActivityLifecycleCallback</code>
          <!-- no parameter comment --></td>
      </tr>
    </table>

</div>





<!-- ========= METHOD DETAIL ======== -->



<!-- ========= END OF CLASS DATA ========= -->

</div><!-- end jd-content -->



<div class="data-reference-resources-wrapper">
  
  <ul data-reference-resources>
    
    
    <li><h2>Interfaces</h2>
      <ul>
          <li class="api apilevel-"><a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleCallback.html">ActivityLifecycleCallback</a></li>
          <li class="selected api apilevel-"><a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleMonitor.html">ActivityLifecycleMonitor</a></li>
          <li class="api apilevel-"><a href="/reference/android/support/test/runner/lifecycle/ApplicationLifecycleCallback.html">ApplicationLifecycleCallback</a></li>
          <li class="api apilevel-"><a href="/reference/android/support/test/runner/lifecycle/ApplicationLifecycleMonitor.html">ApplicationLifecycleMonitor</a></li>
      </ul>
    </li>
    
    <li><h2>Classes</h2>
      <ul>
          <li class="api apilevel-"><a href="/reference/android/support/test/runner/lifecycle/ActivityLifecycleMonitorRegistry.html">ActivityLifecycleMonitorRegistry</a></li>
          <li class="api apilevel-"><a href="/reference/android/support/test/runner/lifecycle/ApplicationLifecycleMonitorRegistry.html">ApplicationLifecycleMonitorRegistry</a></li>
      </ul>
    </li>
    
    <li><h2>Enums</h2>
      <ul>
          <li class="api apilevel-"><a href="/reference/android/support/test/runner/lifecycle/ApplicationStage.html">ApplicationStage</a></li>
          <li class="api apilevel-"><a href="/reference/android/support/test/runner/lifecycle/Stage.html">Stage</a></li>
      </ul>
    </li>
    
    
  </ul>
  
</div>



</body>
</html>
